{"swagger":"2.0","info":{"version":"1.0.0","title":"Swagger spec for IAM service"},"tags":[{"name":"Mail authenticator","description":"Operations mail authenticator"},{"name":"Device authenticator","description":"Operations regarding device authenticator"},{"name":"Device authenticator - health","description":"Operations regarding health of device authenticator"},{"name":"Device authenticator - metrics","description":"Operations metrics regarding health of device authenticator"}],"paths":{"/check":{"post":{"tags":["Mail authenticator"],"summary":"Check the email and session ID","description":"Check the email and session ID.","operationId":"check","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"Successful check","schema":{"$ref":"#/definitions/LongPollResponse"}},"404":{"description":"User does not exist"},"408":{"description":"Request timeout for check email and session ID"}}}},"/link":{"get":{"tags":["Mail authenticator"],"summary":"Received validation link","description":"Received validation link based on token.","operationId":"link","consumes":["text/html"],"produces":["text/html"],"parameters":[{"name":"sessionId","in":"query","required":false,"type":"string"}],"responses":{"200":{"description":"Successful received he link"},"400":{"description":"Invalid Token"},"410":{"description":"Session expired! Register Again."},"500":{"description":"Internal server error"}}}},"/register":{"post":{"tags":["Mail authenticator"],"summary":"Register the user ","description":"Register the user based on email, host and name.","operationId":"register","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"Successful register","schema":{"$ref":"#/definitions/RegisterResponse"}},"500":{"description":"Internal server error"}}}},"/resend":{"post":{"tags":["Mail authenticator"],"summary":"Resend email","description":"Resend registration email to user based on email and session ID.","operationId":"resend","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"Successful resend email"},"404":{"description":"User does not exist"},"410":{"description":"Session expired! Register Again."},"500":{"description":"Internal server error"}}}},"/validate":{"get":{"tags":["Mail authenticator"],"summary":"Received validate token","description":"Received validation based on session ID found in DB","operationId":"validate","consumes":["text/html"],"produces":["text/html"],"parameters":[{"name":"sessionId","in":"query","required":false,"type":"string"}],"responses":{"200":{"description":"Successful validate"},"400":{"description":"Invalid Token"},"404":{"description":"User with given token does not exist"},"410":{"description":"Session expired! Register Again."},"500":{"description":"Internal server error"}}}},"/":{"post":{"tags":["Device authenticator"],"summary":"Authenticate the client ","description":"Authenticate the client device","operationId":"authenticate","consumes":["application/x-www-form-urlencoded"],"produces":["application/json"],"responses":{"200":{"description":"Client is successfully authenticated"},"400":{"description":"Bad request! Device provided wrong data"},"401":{"description":"Unauthorized! Device is not authorized"},"500":{"description":"Internal server error! Device did not provide all necessary details for authentication"}}}},"/health":{"get":{"tags":["Device authenticator - health"],"summary":"Check health","description":"Verify health of the device authenticator.","operationId":"get","produces":["application/json"],"responses":{"200":{"description":"Succesfully got health of the device authenticator","schema":{"type":"object","additionalProperties":{"type":"object"}}}}}},"/metrics":{"get":{"tags":["Device authenticator - metrics"],"summary":"Get metrics","description":"Get metrics of the device authenticator","operationId":"get","produces":["application/json"],"responses":{"200":{"description":"Succesfully got metrics of the device authenticator","schema":{"type":"object"}}}}}},"definitions":{"LongPollResponse":{"type":"object","properties":{"sessionId":{"type":"string"},"email":{"type":"string"},"valid":{"type":"boolean","default":false}}},"RegisterResponse":{"type":"object","properties":{"sessionId":{"type":"string"}}}}}
